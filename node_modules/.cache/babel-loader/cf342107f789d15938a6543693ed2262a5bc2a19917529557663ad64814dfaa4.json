{"ast":null,"code":"var _jsxFileName = \"/Users/brianoutland/Desktop/VS code Projects/pokedex-app/src/Pokegame.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport Pokedex from './Pokedex';\nimport './Pokegame.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Pokegame({\n  player1Name,\n  player2Name,\n  onScoreUpdate\n}) {\n  _s();\n  const [pokemon, setPokemon] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const hasUpdatedScore = useRef(false);\n  useEffect(() => {\n    fetchRandomPokemon();\n  }, []);\n  const fetchRandomPokemon = async () => {\n    setLoading(true);\n    setError(null);\n    hasUpdatedScore.current = false; // Reset score update flag\n\n    try {\n      // Generate 8 unique random Pokemon IDs (1-151 for classic Gen 1)\n      // You can change 151 to 898 for all Pokemon, or 1025 for the latest\n      const maxPokemonId = 151;\n      const pokemonIds = new Set();\n      while (pokemonIds.size < 8) {\n        pokemonIds.add(Math.floor(Math.random() * maxPokemonId) + 1);\n      }\n\n      // Fetch all 8 Pokemon in parallel\n      const pokemonPromises = Array.from(pokemonIds).map(id => fetch(`https://pokeapi.co/api/v2/pokemon/${id}`).then(res => res.json()));\n      const pokemonData = await Promise.all(pokemonPromises);\n\n      // Format the data to match our component structure\n      const formattedPokemon = pokemonData.map(p => ({\n        id: p.id,\n        name: p.name,\n        type: p.types[0].type.name,\n        // Get primary type\n        base_experience: p.base_experience || 100 // Fallback if null\n      }));\n      setPokemon(formattedPokemon);\n      setLoading(false);\n    } catch (err) {\n      console.error('Error fetching Pokemon:', err);\n      setError('Failed to load Pokemon. Please try again!');\n      setLoading(false);\n    }\n  };\n\n  // Split Pokemon into two hands\n  const hand1 = pokemon.slice(0, 4);\n  const hand2 = pokemon.slice(4, 8);\n\n  // Calculate total experience\n  const exp1 = hand1.reduce((acc, p) => acc + p.base_experience, 0);\n  const exp2 = hand2.reduce((acc, p) => acc + p.base_experience, 0);\n\n  // Determine winner and update score ONLY ONCE per battle\n  useEffect(() => {\n    if (pokemon.length === 8 && !hasUpdatedScore.current) {\n      if (exp1 > exp2) {\n        onScoreUpdate(1);\n        hasUpdatedScore.current = true;\n      } else if (exp2 > exp1) {\n        onScoreUpdate(2);\n        hasUpdatedScore.current = true;\n      }\n    }\n  }, [pokemon]); // Only depend on pokemon array changing\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Pokegame-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Pokeball-loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Catching Pokemon...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Pokegame-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"\\uD83D\\uDE1E \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"retry-button\",\n        onClick: fetchRandomPokemon,\n        children: \"\\uD83D\\uDD04 Try Again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Pokegame\",\n    children: [/*#__PURE__*/_jsxDEV(Pokedex, {\n      pokemon: hand1,\n      exp: exp1,\n      isWinner: exp1 > exp2,\n      playerName: player1Name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pokedex, {\n      pokemon: hand2,\n      exp: exp2,\n      isWinner: exp2 > exp1,\n      playerName: player2Name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n_s(Pokegame, \"q2TLPpbR1iwgUtZ0woZq70GsKdo=\");\n_c = Pokegame;\nexport default Pokegame;\nvar _c;\n$RefreshReg$(_c, \"Pokegame\");","map":{"version":3,"names":["useState","useEffect","useRef","Pokedex","jsxDEV","_jsxDEV","Pokegame","player1Name","player2Name","onScoreUpdate","_s","pokemon","setPokemon","loading","setLoading","error","setError","hasUpdatedScore","fetchRandomPokemon","current","maxPokemonId","pokemonIds","Set","size","add","Math","floor","random","pokemonPromises","Array","from","map","id","fetch","then","res","json","pokemonData","Promise","all","formattedPokemon","p","name","type","types","base_experience","err","console","hand1","slice","hand2","exp1","reduce","acc","exp2","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","exp","isWinner","playerName","_c","$RefreshReg$"],"sources":["/Users/brianoutland/Desktop/VS code Projects/pokedex-app/src/Pokegame.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport Pokedex from './Pokedex';\nimport './Pokegame.css';\n\nfunction Pokegame({ player1Name, player2Name, onScoreUpdate }) {\n  const [pokemon, setPokemon] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const hasUpdatedScore = useRef(false);\n\n  useEffect(() => {\n    fetchRandomPokemon();\n  }, []);\n\n  const fetchRandomPokemon = async () => {\n    setLoading(true);\n    setError(null);\n    hasUpdatedScore.current = false; // Reset score update flag\n\n    try {\n      // Generate 8 unique random Pokemon IDs (1-151 for classic Gen 1)\n      // You can change 151 to 898 for all Pokemon, or 1025 for the latest\n      const maxPokemonId = 151;\n      const pokemonIds = new Set();\n\n      while (pokemonIds.size < 8) {\n        pokemonIds.add(Math.floor(Math.random() * maxPokemonId) + 1);\n      }\n\n      // Fetch all 8 Pokemon in parallel\n      const pokemonPromises = Array.from(pokemonIds).map(id =>\n        fetch(`https://pokeapi.co/api/v2/pokemon/${id}`)\n          .then(res => res.json())\n      );\n\n      const pokemonData = await Promise.all(pokemonPromises);\n\n      // Format the data to match our component structure\n      const formattedPokemon = pokemonData.map(p => ({\n        id: p.id,\n        name: p.name,\n        type: p.types[0].type.name, // Get primary type\n        base_experience: p.base_experience || 100 // Fallback if null\n      }));\n\n      setPokemon(formattedPokemon);\n      setLoading(false);\n    } catch (err) {\n      console.error('Error fetching Pokemon:', err);\n      setError('Failed to load Pokemon. Please try again!');\n      setLoading(false);\n    }\n  };\n\n  // Split Pokemon into two hands\n  const hand1 = pokemon.slice(0, 4);\n  const hand2 = pokemon.slice(4, 8);\n\n  // Calculate total experience\n  const exp1 = hand1.reduce((acc, p) => acc + p.base_experience, 0);\n  const exp2 = hand2.reduce((acc, p) => acc + p.base_experience, 0);\n\n  // Determine winner and update score ONLY ONCE per battle\n  useEffect(() => {\n    if (pokemon.length === 8 && !hasUpdatedScore.current) {\n      if (exp1 > exp2) {\n        onScoreUpdate(1);\n        hasUpdatedScore.current = true;\n      } else if (exp2 > exp1) {\n        onScoreUpdate(2);\n        hasUpdatedScore.current = true;\n      }\n    }\n  }, [pokemon]); // Only depend on pokemon array changing\n\n  if (loading) {\n    return (\n      <div className=\"Pokegame-loading\">\n        <div className=\"Pokeball-loader\"></div>\n        <h2>Catching Pokemon...</h2>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"Pokegame-error\">\n        <h2>ðŸ˜ž {error}</h2>\n        <button className=\"retry-button\" onClick={fetchRandomPokemon}>\n          ðŸ”„ Try Again\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"Pokegame\">\n      <Pokedex\n        pokemon={hand1}\n        exp={exp1}\n        isWinner={exp1 > exp2}\n        playerName={player1Name}\n      />\n      <Pokedex\n        pokemon={hand2}\n        exp={exp2}\n        isWinner={exp2 > exp1}\n        playerName={player2Name}\n      />\n    </div>\n  );\n}\n\nexport default Pokegame;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}